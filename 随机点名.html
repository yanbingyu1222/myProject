<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>随机点名系统 - 课堂互动神器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4361ee',
                        secondary: '#3f37c9',
                        accent: '#4895ef',
                    },
                    animation: {
                        'roll': 'roll 0.1s linear infinite',
                        'bounce-slow': 'bounce 0.6s ease-in-out infinite',
                    },
                    keyframes: {
                        roll: {
                            '0%': { transform: 'translateY(-5px)' },
                            '100%': { transform: 'translateY(5px)' },
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex flex-col items-center justify-center p-4">
    <!-- 头部标题 -->
    <header class="w-full max-w-4xl text-center mb-8">
        <h1 class="text-[clamp(2rem,5vw,3rem)] font-bold text-primary flex items-center justify-center gap-3">
            <i class="fa fa-random text-accent animate-bounce-slow"></i>
            <span>随机点名系统</span>
        </h1>
        <p class="text-gray-600 mt-2 text-[clamp(1rem,2vw,1.2rem)]">课堂互动 | 会议抽奖 | 公平公正</p>
    </header>

    <!-- 核心功能区 -->
    <main class="w-full max-w-4xl bg-white rounded-2xl shadow-xl p-6 md:p-8">
        <!-- 名单导入区 -->
        <div class="mb-8">
            <label class="block text-gray-700 font-medium mb-2">导入名单（一行一个名字）</label>
            <textarea id="nameList" rows="4" placeholder="张三&#10;李四&#10;王五&#10;赵六" 
                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all resize-none"></textarea>
            <div class="flex gap-3 mt-3">
                <button id="importBtn" class="flex-1 bg-primary hover:bg-secondary text-white py-2 px-4 rounded-lg transition-all flex items-center justify-center gap-2">
                    <i class="fa fa-upload"></i> 导入名单
                </button>
                <button id="clearBtn" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg transition-all flex items-center justify-center gap-2">
                    <i class="fa fa-trash"></i> 清空
                </button>
            </div>
        </div>

        <!-- 点名显示区 -->
        <div class="relative h-48 md:h-64 flex items-center justify-center bg-gradient-to-r from-primary/10 to-accent/10 rounded-xl mb-8 overflow-hidden">
            <div id="nameDisplay" class="text-[clamp(2.5rem,8vw,4rem)] font-bold text-primary text-center transition-all duration-300">
                点击开始
            </div>
            <!-- 装饰元素 -->
            <div class="absolute top-0 left-0 w-full h-full pointer-events-none">
                <div class="absolute top-2 left-1/4 w-4 h-4 bg-accent rounded-full animate-pulse"></div>
                <div class="absolute bottom-4 right-1/3 w-3 h-3 bg-primary rounded-full animate-pulse delay-300"></div>
                <div class="absolute top-1/2 left-1/5 w-5 h-5 bg-secondary rounded-full animate-pulse delay-700"></div>
            </div>
        </div>

        <!-- 控制按钮区 -->
        <div class="flex gap-4">
            <button id="startBtn" class="flex-1 bg-primary hover:bg-secondary text-white py-3 px-6 rounded-lg transition-all text-lg font-medium flex items-center justify-center gap-2 shadow-lg shadow-primary/20">
                <i class="fa fa-play"></i> 开始点名
            </button>
            <button id="stopBtn" class="flex-1 bg-red-500 hover:bg-red-600 text-white py-3 px-6 rounded-lg transition-all text-lg font-medium flex items-center justify-center gap-2 shadow-lg shadow-red-500/20" disabled>
                <i class="fa fa-stop"></i> 停止
            </button>
        </div>

        <!-- 点名记录 -->
        <div class="mt-8">
            <h3 class="text-gray-700 font-medium mb-2 flex items-center gap-2">
                <i class="fa fa-history text-accent"></i> 点名记录
            </h3>
            <div id="recordList" class="h-24 overflow-y-auto p-3 border border-gray-200 rounded-lg text-gray-600 space-y-1">
                暂无记录
            </div>
        </div>
    </main>

    <!-- 底部说明 -->
    <footer class="mt-8 text-gray-500 text-sm text-center">
        <p>无需安装 | 即开即用 | 支持重复/不重复点名</p>
    </footer>

    <script>
        // 核心逻辑
        const nameListEl = document.getElementById('nameList');
        const nameDisplayEl = document.getElementById('nameDisplay');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const importBtn = document.getElementById('importBtn');
        const clearBtn = document.getElementById('clearBtn');
        const recordListEl = document.getElementById('recordList');

        let nameList = [];
        let isRolling = false;
        let rollInterval = null;
        let record = [];

        // 初始化默认名单
        nameListEl.value = `张三\n李四\n王五\n赵六\n孙七\n周八\n吴九\n郑十`;
        initNameList();

        // 初始化名单
        function initNameList() {
            nameList = nameListEl.value.trim().split('\n').filter(name => name.trim() !== '');
            if (nameList.length === 0) {
                nameDisplayEl.textContent = '请导入名单';
                nameDisplayEl.classList.add('text-gray-400');
            } else {
                nameDisplayEl.classList.remove('text-gray-400');
            }
        }

        // 滚动点名
        function rollName() {
            if (nameList.length === 0) return;
            const randomIndex = Math.floor(Math.random() * nameList.length);
            nameDisplayEl.textContent = nameList[randomIndex];
            nameDisplayEl.classList.add('animate-roll');
            setTimeout(() => {
                nameDisplayEl.classList.remove('animate-roll');
            }, 100);
        }

        // 开始点名
        startBtn.addEventListener('click', () => {
            if (nameList.length === 0) {
                alert('请先导入名单！');
                return;
            }
            if (isRolling) return;
            
            isRolling = true;
            startBtn.disabled = true;
            stopBtn.disabled = false;
            nameDisplayEl.classList.add('text-secondary');
            
            // 播放音效（可选）
            const rollSound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-fast-small-sweep-transition-166.mp3');
            rollSound.volume = 0.3;
            rollSound.play().catch(() => {});
            
            rollInterval = setInterval(rollName, 100);
        });

        // 停止点名
        stopBtn.addEventListener('click', () => {
            if (!isRolling) return;
            
            clearInterval(rollInterval);
            isRolling = false;
            startBtn.disabled = false;
            stopBtn.disabled = true;
            nameDisplayEl.classList.remove('text-secondary');
            
            // 播放停止音效
            const stopSound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3');
            stopSound.volume = 0.5;
            stopSound.play().catch(() => {});
            
            // 记录点名结果
            const selectedName = nameDisplayEl.textContent;
            record.unshift(`【${new Date().toLocaleTimeString()}】${selectedName}`);
            updateRecordList();
        });

        // 导入名单
        importBtn.addEventListener('click', initNameList);

        // 清空名单
        clearBtn.addEventListener('click', () => {
            nameListEl.value = '';
            initNameList();
        });

        // 更新记录列表
        function updateRecordList() {
            if (record.length === 0) {
                recordListEl.innerHTML = '暂无记录';
                return;
            }
            recordListEl.innerHTML = record.map(item => `<div class="flex justify-between items-center p-1 border-b border-gray-100">
                <span>${item}</span>
                <i class="fa fa-check text-green-500"></i>
            </div>`).join('');
        }

        // 响应式调整
        window.addEventListener('resize', () => {
            const fontSize = Math.min(window.innerWidth * 0.12, 64);
            nameDisplayEl.style.fontSize = `${fontSize}px`;
        });
    </script>
</body>
</html>
