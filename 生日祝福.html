<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>ç”Ÿæ—¥å¿«ä¹!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }
        
        .container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 1;
        }
        
        /* åå­—è¾“å…¥è¡¨å•æ ·å¼ */
        .name-input-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 1s ease, transform 1s ease;
        }
        
        .name-input-container.hidden {
            opacity: 0;
            transform: translateY(-50px);
            pointer-events: none;
        }
        
        .name-input-form {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            width: 90%;
            display: flex;
            flex-direction: column;
            gap: 25px;
            animation: formAppear 1s ease-out;
        }
        
        @keyframes formAppear {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        .name-input-icon {
            font-size: 4rem;
            margin-bottom: 10px;
            animation: bounce 2s infinite;
        }
        
        .name-input-title {
            color: #ff6b6b;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            font-weight: 700;
        }
        
        .name-input-label {
            font-size: 1.2rem;
            color: #555;
            text-align: left;
            margin-bottom: 5px;
        }
        
        .name-input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            outline: none;
        }
        
        .name-input:focus {
            border-color: #ff6b6b;
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
        }
        
        .name-input-submit {
            background: linear-gradient(45deg, #ff6b6b, #ee5a6f);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            outline: none;
            font-weight: 600;
            letter-spacing: 1px;
        }
        
        .name-input-submit:hover {
            transform: scale(1.03);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
        }
        
        .name-input-submit:active {
            transform: scale(0.98);
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .name-input-form {
                padding: 30px 20px;
            }
            
            .name-input-title {
                font-size: 2rem;
            }
            
            .name-input-icon {
                font-size: 3.5rem;
            }
        }
        
        @media (max-width: 480px) {
            .name-input-form {
                padding: 25px 15px;
            }
            
            .name-input-title {
                font-size: 1.8rem;
            }
            
            .name-input-icon {
                font-size: 3rem;
            }
        }
        
        .birthday-card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 600px;
            width: 90%;
            position: relative;
            transform-style: preserve-3d;
            perspective: 1000px;
            transition: transform 0.5s ease;
            overflow: hidden;
        }
        
        .birthday-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,214,217,0.5) 0%, rgba(255,255,255,0) 70%);
            animation: shimmer 3s infinite linear;
            z-index: 0;
        }
        
        .birthday-card:hover {
            transform: translateY(-10px) rotateY(5deg);
        }
        
        .card-content {
            position: relative;
            z-index: 1;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s forwards 0.5s;
        }
        
        .cake-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }
        
        h1 {
            color: #ff6b6b;
            font-size: 3.5rem;
            margin-bottom: 25px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            font-weight: 700;
            letter-spacing: 2px;
        }
        
        .message {
            font-size: 1.6rem;
            color: #555;
            margin-bottom: 25px;
            line-height: 1.8;
            font-weight: 300;
        }
        
        .name {
            font-weight: bold;
            color: #ff6b6b;
            font-size: 1.8rem;
            text-decoration: underline;
            text-decoration-style: wavy;
            text-decoration-color: #ff9a9e;
        }
        
        .date {
            font-style: italic;
            color: #888;
            margin-bottom: 35px;
            font-size: 1.2rem;
        }
        
        .btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a6f);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            outline: none;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }
        
        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
        }
        
        .btn:active {
            transform: scale(0.98);
        }
        
        /* å€’è®¡æ—¶æ ·å¼ */
        .countdown {
            margin: 30px 0;
            display: flex;
            justify-content: center;
            gap: 15px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .countdown.active {
            opacity: 1;
        }
        
        .countdown-item {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            min-width: 80px;
        }
        
        .countdown-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #ff6b6b;
            line-height: 1;
        }
        
        .countdown-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* æƒŠå–œå†…å®¹æ ·å¼ */
        .surprise-content {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.5s ease;
            pointer-events: none;
        }
        
        .surprise-content.active {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }
        
        .surprise-content h2 {
            color: #ff6b6b;
            margin-bottom: 15px;
            font-size: 2rem;
        }
        
        .surprise-content p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        /* ç¤¼ç‰©ç›’å­æ ·å¼ */
        .gift-box {
            position: relative;
            width: 100px;
            height: 100px;
            margin: 20px auto;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .gift-box:hover {
            transform: scale(1.05);
        }
        
        .gift-box-top {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 30px;
            background: #ff5252;
            border-radius: 5px 5px 0 0;
            transition: transform 0.5s ease;
        }
        
        .gift-box-bottom {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 70px;
            background: #ff6b6b;
            border-radius: 0 0 5px 5px;
        }
        
        .gift-box-ribbon {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .gift-box-ribbon-horizontal {
            position: absolute;
            top: 40px;
            left: 0;
            width: 100%;
            height: 15px;
            background: #feca57;
        }
        
        .gift-box-ribbon-vertical {
            position: absolute;
            top: 0;
            left: 45px;
            width: 10px;
            height: 100%;
            background: #feca57;
        }
        
        .gift-box.opened .gift-box-top {
            transform: translateY(-30px);
        }
        
        /* å½“å‰æ—¶é—´æ˜¾ç¤ºæ ·å¼ */
        .current-time {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 12px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
            z-index: 5;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        /* è‡ªå®šä¹‰æ¨¡æ€æ¡†æ ·å¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .modal-overlay.active .modal {
            transform: scale(1);
        }
        
        .modal-header {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
        }
        
        .modal-header h2 {
            color: #ff6b6b;
            font-size: 1.8rem;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .modal-content {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #333;
            text-align: center;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            transition: color 0.3s ease, transform 0.3s ease;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .modal-close:hover {
            color: #ff6b6b;
            transform: rotate(90deg);
        }
        
        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
        }
        
        .modal-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .modal-btn-primary {
            background: #ff6b6b;
            color: white;
        }
        
        .modal-btn-primary:hover {
            background: #ff5252;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }
        
        .modal-btn-secondary {
            background: #e0e0e0;
            color: #333;
        }
        
        .modal-btn-secondary:hover {
            background: #d0d0d0;
            transform: translateY(-2px);
        }
        
        /* æ¨¡æ€æ¡†åŠ¨ç”»æ•ˆæœ */
        @keyframes modalEnter {
            0% {
                opacity: 0;
                transform: scale(0.8) translateY(-20px);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        .modal-overlay.active .modal {
            animation: modalEnter 0.4s ease-out forwards;
        }
        
        /* éŸ³é¢‘æ§åˆ¶æŒ‰é’®æ ·å¼ */
        .audio-controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 10;
        }
        
        .audio-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            font-size: 1.5rem;
        }
        
        .audio-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .audio-btn:active {
            transform: scale(0.95);
        }
        
        /* éŸ³é‡æ§åˆ¶æ ·å¼ */
        .volume-control {
            position: absolute;
            bottom: 80px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transform: scale(0);
            transform-origin: bottom right;
            transition: transform 0.3s ease;
            opacity: 0;
        }
        
        .volume-control.active {
            transform: scale(1);
            opacity: 1;
        }
        
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100px;
            height: 5px;
            background: #ddd;
            border-radius: 5px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            background: #ff6b6b;
            border-radius: 50%;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        input[type="range"]::-webkit-slider-thumb:hover {
            background: #ff5252;
        }
        
        .decorations {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            opacity: 0.8;
        }
        
        .decoration {
            font-size: 1.5rem;
            animation: float 3s ease-in-out infinite;
        }
        
        .decoration:nth-child(1) { animation-delay: 0s; }
        .decoration:nth-child(2) { animation-delay: 1s; }
        .decoration:nth-child(3) { animation-delay: 0.5s; }
        .decoration:nth-child(4) { animation-delay: 1.5s; }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-20px);
            }
            60% {
                transform: translateY(-10px);
            }
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-10px) rotate(5deg);
            }
        }
        
        @keyframes shimmer {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            
            .message {
                font-size: 1.3rem;
            }
            
            .name {
                font-size: 1.5rem;
            }
            
            .birthday-card {
                padding: 30px 20px;
                margin: 20px;
            }
            
            .cake-icon {
                font-size: 4rem;
            }
            
            .btn {
                padding: 12px 30px;
                font-size: 1rem;
            }
            
            .countdown-item {
                min-width: 60px;
                padding: 10px 15px;
            }
            
            .countdown-number {
                font-size: 2rem;
            }
            
            .surprise-content h2 {
                font-size: 1.6rem;
            }
            
            .surprise-content p {
                font-size: 1rem;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 2rem;
                letter-spacing: 1px;
            }
            
            .message {
                font-size: 1.1rem;
            }
            
            .name {
                font-size: 1.3rem;
            }
            
            .cake-icon {
                font-size: 3.5rem;
            }
            
            .birthday-card {
                padding: 25px 15px;
            }
            
            .btn {
                padding: 10px 25px;
                font-size: 0.9rem;
            }
            
            .countdown {
                gap: 10px;
            }
            
            .countdown-item {
                min-width: 50px;
                padding: 8px 12px;
            }
            
            .countdown-number {
                font-size: 1.8rem;
            }
            
            .countdown-label {
                font-size: 0.8rem;
            }
            
            .surprise-content {
                padding: 15px;
            }
            
            .surprise-content h2 {
                font-size: 1.4rem;
            }
            
            .gift-box {
                width: 80px;
                height: 80px;
            }
            
            .decoration {
                font-size: 1.2rem;
            }
        }
        
        /* è§¦æ‘¸è®¾å¤‡ä¼˜åŒ– */
        @media (hover: none) and (pointer: coarse) {
            .balloon:hover {
                transform: none;
            }
            
            .balloon:active {
                transform: scale(1.1);
            }
            
            .gift-box:hover {
                transform: none;
            }
            
            .gift-box:active {
                transform: scale(1.05);
            }
            
            .btn:hover {
                transform: none;
                box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            }
            
            .btn:active {
                transform: scale(0.98);
                box-shadow: 0 2px 10px rgba(255, 107, 107, 0.4);
            }
            
            .modal-close:active {
                color: #ff6b6b;
                transform: rotate(90deg);
            }
            
            .modal-btn:active {
                transform: translateY(0);
            }
            
            .audio-btn:active {
                transform: scale(0.95);
            }
            
            /* ä¿®å¤iOSä¸Šçš„è§¦æ‘¸å»¶è¿Ÿ */
            * {
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }
        }
        
        /* æ°”çƒæ ·å¼ */
        .balloon {
            position: absolute;
            bottom: -100px;
            width: 80px;
            height: 100px;
            background: radial-gradient(circle at 50% 50%, #ff6b6b, #ff5252);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: floatUp linear infinite;
            z-index: 0;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .balloon::before {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 3px;
            height: 20px;
            background: #666;
        }
        
        .balloon::after {
            content: '';
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 5px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 50%;
        }
        
        .balloon:hover {
            transform: scale(1.1);
        }
        
        /* æ˜Ÿæ˜Ÿæ ·å¼ */
        .star {
            position: absolute;
            background: white;
            width: 10px;
            height: 10px;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            animation: twinkle 2s infinite alternate;
            opacity: 0.8;
            z-index: 0;
        }
        
        /* çˆ†ç‚¸æ•ˆæœ */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            opacity: 0;
            animation: confettiFall 3s forwards;
        }
        
        @keyframes floatUp {
            0% {
                transform: translateY(0) translateX(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(50px) rotate(360deg);
                opacity: 0;
            }
        }
        
        @keyframes twinkle {
            0% {
                opacity: 0.3;
                transform: scale(0.8);
            }
            100% {
                opacity: 1;
                transform: scale(1.2);
            }
        }
        
        @keyframes confettiFall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="name-input-container" id="nameInputContainer">
        <form id="nameInputForm" class="name-input-form">
            <div class="name-input-icon">ğŸ‚</div>
            <h2 class="name-input-title">ç‰¹åˆ«çš„ç¥ç¦</h2>
            <label for="name" class="name-input-label">è¯·è¾“å…¥æ‚¨çš„åå­—ï¼š</label>
            <input type="text" id="name" class="name-input" placeholder="è¯·è¾“å…¥åå­—" required maxlength="20">
            <button type="submit" class="name-input-submit">å¼€å§‹åº†ç¥</button>
        </form>
    </div>
    
    <div class="container" id="container">
        <!-- éŸ³é¢‘æ§åˆ¶ -->
        <div class="audio-controls">
            <button class="audio-btn" id="toggleAudio">ğŸ”Š</button>
            <div class="volume-control" id="volumeControl">
                <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="0.5">
            </div>
        </div>
        
        <!-- è‡ªå®šä¹‰æ¨¡æ€æ¡† -->
        <div class="modal-overlay" id="giftModal">
            <div class="modal">
                <div class="modal-header">
                    <h2>ğŸ ç»™ <span class="name">äº²çˆ±çš„</span> çš„ç‰¹åˆ«ç¤¼ç‰© ğŸ</h2>
                    <button class="modal-close" id="closeModal">&times;</button>
                </div>
                <div class="modal-content">
                    <p>äº²çˆ±çš„<span class="name">[åå­—]</span>ï¼Œç”Ÿæ—¥å¿«ä¹ï¼</p>
                    <p>æ„¿è¿™ä¸ªç‰¹åˆ«çš„æ—¥å­å¸¦ç»™ä½ æ— å°½çš„å¿«ä¹å’Œç¾å¥½çš„å›å¿†ï¼</p>
                    <p>å¸Œæœ›ä½ çš„æ¯ä¸€å¤©éƒ½å……æ»¡é˜³å…‰å’Œæ¬¢ç¬‘ï¼</p>
                </div>
                <div class="modal-buttons">
                    <button class="modal-btn modal-btn-primary" id="confirmModal">è°¢è°¢ï¼</button>
                </div>
            </div>
        </div>
        
        <div class="birthday-card">
           
            <div class="decorations">
                <span class="decoration">ğŸ‰</span>
                <span class="decoration">ğŸ</span>
                <span class="decoration">ğŸˆ</span>
                <span class="decoration">âœ¨</span>
            </div>
            <div class="card-content">
                <div class="cake-icon">ğŸ‚</div>
                <h1>ç”Ÿæ—¥å¿«ä¹ï¼Œ<span class="name">äº²çˆ±çš„</span>!</h1>
                <p class="message">äº²çˆ±çš„<span class="name">[åå­—]</span>ï¼Œåœ¨è¿™ä¸ªç‰¹åˆ«çš„æ—¥å­é‡Œï¼Œç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½å……æ»¡é˜³å…‰å’Œç¬‘å®¹ï¼</p>
                <div class="date" id="currentTime"></div>
                <button class="btn" id="surpriseBtn">ç‚¹å‡»è·å–æƒŠå–œ</button>
                
                <!-- å€’è®¡æ—¶ -->
                <div class="countdown" id="countdown">
                    <div class="countdown-item">
                        <div class="countdown-number" id="seconds">3</div>
                        <div class="countdown-label">ç§’</div>
                    </div>
                </div>
                
                <!-- æƒŠå–œå†…å®¹ -->
                <div class="surprise-content" id="surpriseContent">
                    <h2>ğŸ‰ ç‰¹åˆ«çš„ç¥ç¦ ğŸ‰</h2>
                    <p>åœ¨è¿™ä¸ªç‰¹åˆ«çš„æ—¥å­é‡Œï¼Œæ„¿æ‰€æœ‰çš„å¹¸ç¦ã€å¿«ä¹å’Œç¾å¥½éƒ½å›´ç»•ç€ä½ ï¼</p>
                    <p>å¸Œæœ›ä½ çš„æœªæ¥å……æ»¡æ— é™å¯èƒ½ï¼Œæ¯ä¸€å¤©éƒ½æ¯”æ˜¨å¤©æ›´åŠ ç²¾å½©ï¼</p>
                    <p>è®°ä½ï¼Œä½ æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå€¼å¾—æ‹¥æœ‰ä¸–ç•Œä¸Šæœ€å¥½çš„ä¸€åˆ‡ï¼</p>
                    
                    <!-- ç¤¼ç‰©ç›’å­ -->
                    <div class="gift-box" id="giftBox">
                        <div class="gift-box-ribbon">
                            <div class="gift-box-ribbon-horizontal"></div>
                            <div class="gift-box-ribbon-vertical"></div>
                        </div>
                        <div class="gift-box-top"></div>
                        <div class="gift-box-bottom"></div>
                    </div>
                    
                    <p style="font-style: italic; color: #ff6b6b;">ç‚¹å‡»ç¤¼ç‰©ç›’æœ‰æƒŠå–œå“¦ï¼</p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // åˆ›å»ºæ¼‚æµ®æ°”çƒ
        function createBalloons() {
            const container = document.getElementById('container');
            const colors = ['#ff6b6b', '#48dbfb', '#1dd1a1', '#feca57', '#ff9ff3', '#54a0ff'];
            
            setInterval(() => {
                if (document.querySelectorAll('.balloon').length < 8) {
                    const balloon = document.createElement('div');
                    balloon.classList.add('balloon');
                    
                    // éšæœºä½ç½®å’Œé¢œè‰²
                    const left = Math.random() * (container.offsetWidth - 100);
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    const size = Math.random() * 40 + 60; // 60-100px
                    const duration = Math.random() * 10 + 15; // 15-25s
                    const delay = Math.random() * 5;
                    const drift = Math.random() * 100 - 50; // -50 åˆ° 50px
                    
                    balloon.style.left = left + 'px';
                    balloon.style.width = size + 'px';
                    balloon.style.height = size * 1.25 + 'px';
                    balloon.style.backgroundColor = color;
                    balloon.style.animationDuration = duration + 's';
                    balloon.style.animationDelay = delay + 's';
                    
                    // è®¾ç½®éšæœºæ¼‚æµ®è·¯å¾„
                    balloon.style.setProperty('--drift', drift + 'px');
                    
                    // ç‚¹å‡»æ°”çƒçˆ†ç‚¸æ•ˆæœ - å…¼å®¹è§¦æ‘¸è®¾å¤‡
                    balloon.addEventListener('click', handleBalloonClick);
                    balloon.addEventListener('touchstart', handleBalloonClick, { passive: true });
                    
                    function handleBalloonClick(e) {
                        // é˜²æ­¢è§¦æ‘¸äº‹ä»¶è§¦å‘å¤šæ¬¡
                        if (e.type === 'touchstart') {
                            e.preventDefault();
                        }
                        createExplosion(balloon.offsetLeft + size/2, balloon.offsetTop + size/2.5);
                        audioSystem.playPopSound(); // æ’­æ”¾çˆ†ç‚¸éŸ³æ•ˆ
                        balloon.remove();
                    }
                    
                    container.appendChild(balloon);
                    
                    // åŠ¨ç”»ç»“æŸåç§»é™¤
                    setTimeout(() => {
                        if (balloon.parentNode) {
                            balloon.remove();
                        }
                    }, (duration + delay) * 1000);
                }
            }, 2000);
        }
        
        // åˆ›å»ºé—ªçƒæ˜Ÿæ˜Ÿ
        function createStars() {
            const container = document.getElementById('container');
            
            for (let i = 0; i < 30; i++) {
                createStar(container);
            }
            
            // å®šæœŸæ·»åŠ æ–°æ˜Ÿæ˜Ÿ
            setInterval(() => {
                createStar(container);
            }, 3000);
        }
        
        function createStar(container) {
            const star = document.createElement('div');
            star.classList.add('star');
            
            const left = Math.random() * container.offsetWidth;
            const top = Math.random() * container.offsetHeight;
            const size = Math.random() * 8 + 4;
            const duration = Math.random() * 3 + 2;
            const delay = Math.random() * 5;
            
            star.style.left = left + 'px';
            star.style.top = top + 'px';
            star.style.width = size + 'px';
            star.style.height = size + 'px';
            star.style.animationDuration = duration + 's';
            star.style.animationDelay = delay + 's';
            
            container.appendChild(star);
            
            // ä¸€æ®µæ—¶é—´åç§»é™¤æ˜Ÿæ˜Ÿ
            setTimeout(() => {
                if (star.parentNode) {
                    star.remove();
                }
            }, (duration + delay + 10) * 1000);
        }
        
        // åˆ›å»ºçˆ†ç‚¸æ•ˆæœ
        function createExplosion(x, y) {
            const container = document.getElementById('container');
            const colors = ['#ff6b6b', '#48dbfb', '#1dd1a1', '#feca57', '#ff9ff3', '#54a0ff', '#ffffff'];
            
            // åˆ›å»º30ä¸ªç¢ç‰‡
            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                
                const size = Math.random() * 8 + 6;
                const color = colors[Math.floor(Math.random() * colors.length)];
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 100 + 50;
                const duration = Math.random() * 2 + 2;
                
                confetti.style.width = size + 'px';
                confetti.style.height = size + 'px';
                confetti.style.backgroundColor = color;
                confetti.style.left = x + 'px';
                confetti.style.top = y + 'px';
                confetti.style.animationDuration = duration + 's';
                
                // éšæœºå½¢çŠ¶
                if (Math.random() > 0.5) {
                    confetti.style.borderRadius = '50%';
                }
                
                // è®¾ç½®çˆ†ç‚¸æ–¹å‘
                const vx = Math.cos(angle) * speed;
                const vy = Math.sin(angle) * speed;
                confetti.style.setProperty('--vx', vx + 'px');
                confetti.style.setProperty('--vy', vy + 'px');
                
                container.appendChild(confetti);
                
                // åŠ¨ç”»ç»“æŸåç§»é™¤
                setTimeout(() => {
                    if (confetti.parentNode) {
                        confetti.remove();
                    }
                }, duration * 1000);
            }
        }
        
        // Web Audio API éŸ³é¢‘ç³»ç»Ÿ
        class AudioSystem {
            constructor() {
                this.audioContext = null;
                this.backgroundMusic = null;
                this.isPlaying = false;
                this.volume = 0.5;
                this.isInteractiveSoundPlaying = false;
                this.interactiveSoundQueue = [];
                this.notes = {
                    'C4': 261.63,
                    'D4': 293.66,
                    'E4': 329.63,
                    'F4': 349.23,
                    'G4': 392.00,
                    'A4': 440.00,
                    'B4': 493.88,
                    'C5': 523.25
                };
                this.birthdayMelody = [
                    ['C4', 0.5], ['C4', 0.5], ['D4', 1], ['C4', 1], ['F4', 1], ['E4', 2],
                    ['C4', 0.5], ['C4', 0.5], ['D4', 1], ['C4', 1], ['G4', 1], ['F4', 2],
                    ['C4', 0.5], ['C4', 0.5], ['C5', 1], ['A4', 1], ['F4', 1], ['E4', 1], ['D4', 2],
                    ['Bb4', 0.5], ['Bb4', 0.5], ['A4', 1], ['F4', 1], ['G4', 1], ['F4', 2]
                ];
            }
            
            init() {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    return true;
                } catch (e) {
                    console.log('Web Audio API ä¸å—æ”¯æŒ');
                    return false;
                }
            }
            
            setVolume(volume) {
                this.volume = Math.max(0, Math.min(1, volume));
            }
            
            playNote(note, duration = 1) {
                if (!this.audioContext) return;
                
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                oscillator.frequency.value = this.notes[note] || 440;
                oscillator.type = 'sine';
                
                // éŸ³é‡åŒ…ç»œ
                gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(this.volume * 0.3, this.audioContext.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + duration);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + duration);
            }
            
            playMelody(melody, loop = false) {
                if (!this.audioContext) return;
                
                let startTime = this.audioContext.currentTime;
                
                melody.forEach(([note, duration]) => {
                    this.playNote(note, duration * 0.3); // é€Ÿåº¦è°ƒæ•´
                    startTime += duration * 0.3;
                });
                
                if (loop && this.isPlaying) {
                    setTimeout(() => {
                        if (this.isPlaying) {
                            this.playMelody(melody, true);
                        }
                    }, startTime * 1000);
                }
            }
            
            playBackgroundMusic() {
                if (!this.audioContext) return;
                
                this.isPlaying = true;
                this.playMelody(this.birthdayMelody, true);
            }
            
            stopBackgroundMusic() {
                this.isPlaying = false;
            }
            
            // æ’­æ”¾éŸ³æ•ˆ
            playPopSound() {
                if (!this.audioContext) return;
                
                this.isInteractiveSoundPlaying = true;
                
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                oscillator.frequency.setValueAtTime(800, this.audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(100, this.audioContext.currentTime + 0.2);
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(this.volume * 0.5, this.audioContext.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.2);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + 0.2);
                
                // éŸ³æ•ˆç»“æŸåæ£€æŸ¥æ˜¯å¦æ’­æ”¾ç”Ÿæ—¥æ­Œ
                setTimeout(() => {
                    this.isInteractiveSoundPlaying = false;
                    this.checkAndPlayBirthdaySong();
                }, 200);
            }
            
            playClickSound() {
                if (!this.audioContext) return;
                
                this.isInteractiveSoundPlaying = true;
                
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                oscillator.frequency.setValueAtTime(440, this.audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(880, this.audioContext.currentTime + 0.1);
                oscillator.type = 'square';
                
                gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(this.volume * 0.3, this.audioContext.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.1);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + 0.1);
                
                // éŸ³æ•ˆç»“æŸåæ£€æŸ¥æ˜¯å¦æ’­æ”¾ç”Ÿæ—¥æ­Œ
                setTimeout(() => {
                    this.isInteractiveSoundPlaying = false;
                    this.checkAndPlayBirthdaySong();
                }, 100);
            }
            
            playCelebrationSound() {
                if (!this.audioContext) return;
                
                this.isInteractiveSoundPlaying = true;
                
                // æ’­æ”¾ä¸€ç³»åˆ—ä¸Šå‡çš„éŸ³ç¬¦
                const notes = ['C4', 'E4', 'G4', 'C5', 'E5', 'G5', 'C6'];
                const totalDuration = (notes.length - 1) * 50 + 100;
                
                notes.forEach((note, index) => {
                    setTimeout(() => {
                        this.playNote(note, 0.1);
                    }, index * 50);
                });
                
                // éŸ³æ•ˆç»“æŸåæ£€æŸ¥æ˜¯å¦æ’­æ”¾ç”Ÿæ—¥æ­Œ
                setTimeout(() => {
                    this.isInteractiveSoundPlaying = false;
                    this.checkAndPlayBirthdaySong();
                }, totalDuration);
            }
            
            // æ£€æŸ¥æ˜¯å¦å¯ä»¥æ’­æ”¾ç”Ÿæ—¥æ­Œ
            checkAndPlayBirthdaySong() {
                if (!this.isInteractiveSoundPlaying && !this.isPlaying) {
                    this.playBackgroundMusic();
                }
            }
        }
        
        // åˆ›å»ºéŸ³é¢‘ç³»ç»Ÿå®ä¾‹
        const audioSystem = new AudioSystem();
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('load', () => {
            // é¦–å…ˆæ£€æŸ¥æ˜¯å¦å·²ç»ä¿å­˜äº†åå­—
            const savedName = localStorage.getItem('birthdayName');
            if (savedName) {
                // å¦‚æœæœ‰ä¿å­˜çš„åå­—ï¼Œç›´æ¥åº”ç”¨åå­—å¹¶éšè—è¾“å…¥è¡¨å•
                applyUserName(savedName);
                document.getElementById('nameInputContainer').classList.add('hidden');
                initMainContent();
            }
            
            // åå­—è¾“å…¥è¡¨å•æäº¤äº‹ä»¶å¤„ç†
            const nameForm = document.getElementById('nameInputForm');
            nameForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const nameInput = document.getElementById('name');
                const userName = nameInput.value.trim();
                
                if (userName) {
                    // ä¿å­˜åå­—åˆ°localStorage
                    localStorage.setItem('birthdayName', userName);
                    
                    // åº”ç”¨ç”¨æˆ·åå­—
                    applyUserName(userName);
                    
                    // éšè—åå­—è¾“å…¥è¡¨å•
                    const nameContainer = document.getElementById('nameInputContainer');
                    nameContainer.classList.add('hidden');
                    
                    // åˆå§‹åŒ–éŸ³é¢‘ç³»ç»Ÿ
                    initAudioOnUserInteraction();
                    
                    // å»¶è¿Ÿä¸€ç‚¹æ—¶é—´ååˆå§‹åŒ–ä¸»å†…å®¹ï¼Œè®©è¿‡æ¸¡æ•ˆæœæ›´æµç•…
                    setTimeout(() => {
                        initMainContent();
                    }, 1000);
                }
            });
            
            // åˆå§‹åŒ–éŸ³é¢‘ç³»ç»Ÿï¼Œä½†åœ¨iOSä¸Šå»¶è¿Ÿåˆ°ç”¨æˆ·äº¤äº’å
            window.addEventListener('touchstart', initAudioOnUserInteraction, { once: true });
            window.addEventListener('click', initAudioOnUserInteraction, { once: true });
            
            function initAudioOnUserInteraction() {
                if (audioSystem.audioContext === null) {
                    audioSystem.init();
                    // æ¢å¤å¯èƒ½è¢«æŒ‚èµ·çš„éŸ³é¢‘ä¸Šä¸‹æ–‡
                    if (audioSystem.audioContext && audioSystem.audioContext.state === 'suspended') {
                        audioSystem.audioContext.resume();
                    }
                }
            }
            
            // åˆå§‹åŒ–ä¸»å†…å®¹
            function initMainContent() {
                // æ˜¾ç¤ºå½“å‰æ—¶é—´
                updateCurrentTime();
                setInterval(updateCurrentTime, 1000);
                
                // åˆ›å»ºæ°”çƒå’Œæ˜Ÿæ˜Ÿ
                createBalloons();
                createStars();
            }
            
            // åº”ç”¨ç”¨æˆ·åå­—åˆ°é¡µé¢ä¸­
            function applyUserName(name) {
                // æ›¿æ¢é¡µé¢ä¸­æ‰€æœ‰åŒ…å«[name]å ä½ç¬¦çš„å…ƒç´ 
                const nameElements = document.querySelectorAll('.name');
                nameElements.forEach(element => {
                    element.textContent = name;
                });
                
                // ç¡®ä¿æ¨¡æ€æ¡†ä¸­çš„åå­—ä¹Ÿè¢«æ›¿æ¢
                const modalNameElements = document.querySelectorAll('#giftModal .name');
                modalNameElements.forEach(element => {
                    element.textContent = name;
                });
                
                // å¯ä»¥é€‰æ‹©æ€§åœ°æ·»åŠ ä¸€ä¸ªæ¬¢è¿åŠ¨ç”»
                const cardElements = document.querySelectorAll('.card-content, .message');
                cardElements.forEach(element => {
                    element.style.opacity = '0';
                    element.style.transform = 'translateY(20px)';
                    element.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
                    
                    setTimeout(() => {
                        element.style.opacity = '1';
                        element.style.transform = 'translateY(0)';
                    }, 300);
                });
            }
            
            // æƒŠå–œæŒ‰é’®äº‹ä»¶ - å…¼å®¹è§¦æ‘¸è®¾å¤‡
                const surpriseBtn = document.getElementById('surpriseBtn');
                surpriseBtn.addEventListener('click', handleSurpriseClick);
                surpriseBtn.addEventListener('touchstart', handleSurpriseClick, { passive: false });
                
                function handleSurpriseClick(e) {
                    if (e.type === 'touchstart') {
                        e.preventDefault();
                    }
                    audioSystem.playClickSound(); // æ’­æ”¾æŒ‰é’®ç‚¹å‡»éŸ³æ•ˆ
                    const surpriseBtn = document.getElementById('surpriseBtn');
                    const countdown = document.getElementById('countdown');
                    const secondsElement = document.getElementById('seconds');
                    const surpriseContent = document.getElementById('surpriseContent');
                    
                    // éšè—æŒ‰é’®ï¼Œæ˜¾ç¤ºå€’è®¡æ—¶
                    surpriseBtn.style.display = 'none';
                    countdown.classList.add('active');
                    
                    let seconds = 3;
                    secondsElement.textContent = seconds;
                    
                    // å€’è®¡æ—¶åŠ¨ç”»
                    const countdownInterval = setInterval(() => {
                        seconds--;
                        secondsElement.textContent = seconds;
                        
                        if (seconds <= 0) {
                            clearInterval(countdownInterval);
                            countdown.style.display = 'none';
                            
                            // æ˜¾ç¤ºæƒŠå–œå†…å®¹
                            setTimeout(() => {
                                surpriseContent.classList.add('active');
                                
                                // ç¡®ä¿éŸ³é¢‘ä¸Šä¸‹æ–‡å·²æ¢å¤
                                if (audioSystem.audioContext && audioSystem.audioContext.state === 'suspended') {
                                    audioSystem.audioContext.resume().then(() => {
                                        audioSystem.playCelebrationSound(); // æ’­æ”¾åº†ç¥éŸ³æ•ˆ
                                    });
                                } else {
                                    audioSystem.playCelebrationSound(); // æ’­æ”¾åº†ç¥éŸ³æ•ˆ
                                }
                                
                                const container = document.getElementById('container');
                                const card = document.querySelector('.birthday-card');
                                const centerX = card.offsetLeft + card.offsetWidth / 2;
                                const centerY = card.offsetTop + card.offsetHeight / 2;
                                
                                // åˆ›å»ºå¤šæ¬¡çˆ†ç‚¸æ•ˆæœ
                                for (let i = 0; i < 10; i++) {
                                    setTimeout(() => {
                                        createExplosion(
                                            centerX + (Math.random() * 300 - 150),
                                            centerY + (Math.random() * 300 - 150)
                                        );
                                    }, i * 100);
                                }
                                
                                // æ”¹å˜èƒŒæ™¯é¢œè‰²
                                document.body.style.transition = 'background 3s ease';
                                document.body.style.background = `linear-gradient(135deg, #${Math.floor(Math.random()*16777215).toString(16)}, #${Math.floor(Math.random()*16777215).toString(16)})`;
                            }, 500);
                        }
                    }, 1000);
                }
                
                // ç¤¼ç‰©ç›’ç‚¹å‡»äº‹ä»¶ - å…¼å®¹è§¦æ‘¸è®¾å¤‡
                const giftBox = document.getElementById('giftBox');
                giftBox.addEventListener('click', handleGiftBoxClick);
                giftBox.addEventListener('touchstart', handleGiftBoxClick, { passive: false });
                
                function handleGiftBoxClick(e) {
                    if (e.type === 'touchstart') {
                        e.preventDefault();
                    }
                    audioSystem.playClickSound(); // æ’­æ”¾ç‚¹å‡»éŸ³æ•ˆ
                    this.classList.add('opened');
                    audioSystem.playCelebrationSound(); // æ’­æ”¾åº†ç¥éŸ³æ•ˆ
                    
                    // åˆ›å»ºç¤¼ç‰©ç›’çˆ†ç‚¸æ•ˆæœ
                    const rect = giftBox.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;
                    
                    // åˆ›å»ºå¤šæ¬¡çˆ†ç‚¸æ•ˆæœ
                    for (let i = 0; i < 8; i++) {
                        setTimeout(() => {
                            createExplosion(
                                centerX + (Math.random() * 100 - 50),
                                centerY + (Math.random() * 100 - 50)
                            );
                        }, i * 100);
                    }
                    
                    // æ˜¾ç¤ºè‡ªå®šä¹‰æ¨¡æ€æ¡†
                    setTimeout(() => {
                        const modal = document.getElementById('giftModal');
                        modal.classList.add('active');
                    }, 500);
                }
                
                // å…³é—­æ¨¡æ€æ¡†
                document.getElementById('closeModal').addEventListener('click', () => {
                    const modal = document.getElementById('giftModal');
                    modal.classList.remove('active');
                });
                
                // ç¡®è®¤æŒ‰é’®
                document.getElementById('confirmModal').addEventListener('click', () => {
                    const modal = document.getElementById('giftModal');
                    modal.classList.remove('active');
                });
                
                // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
                document.getElementById('giftModal').addEventListener('click', (e) => {
                    if (e.target === document.getElementById('giftModal')) {
                        document.getElementById('giftModal').classList.remove('active');
                    }
                });
            
            // éŸ³é¢‘æ§åˆ¶æŒ‰é’®äº‹ä»¶ - å…¼å®¹è§¦æ‘¸è®¾å¤‡
            const toggleAudioBtn = document.getElementById('toggleAudio');
            const volumeControl = document.getElementById('volumeControl');
            const volumeSlider = document.getElementById('volumeSlider');
            
            toggleAudioBtn.addEventListener('click', handleToggleAudio);
            toggleAudioBtn.addEventListener('touchstart', handleToggleAudio, { passive: false });
            
            function handleToggleAudio(e) {
                if (e.type === 'touchstart') {
                    e.preventDefault();
                }
                
                if (audioSystem.isPlaying) {
                    audioSystem.stopBackgroundMusic();
                    toggleAudioBtn.textContent = 'ğŸ”‡';
                } else {
                    // ç¡®ä¿éŸ³é¢‘ä¸Šä¸‹æ–‡å·²åˆå§‹åŒ–å’Œæ¢å¤
                    if (!audioSystem.audioContext) {
                        audioSystem.init();
                    }
                    if (audioSystem.audioContext && audioSystem.audioContext.state === 'suspended') {
                        audioSystem.audioContext.resume().then(() => {
                            audioSystem.playBackgroundMusic();
                            toggleAudioBtn.textContent = 'ğŸ”Š';
                        });
                    } else {
                        audioSystem.playBackgroundMusic();
                        toggleAudioBtn.textContent = 'ğŸ”Š';
                    }
                }
            }
            
            // éŸ³é‡æ§åˆ¶æ˜¾ç¤º/éšè—
            toggleAudioBtn.addEventListener('click', () => {
                volumeControl.classList.toggle('active');
            });
            
            // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­éŸ³é‡æ§åˆ¶
            document.addEventListener('click', (e) => {
                if (!toggleAudioBtn.contains(e.target) && !volumeControl.contains(e.target)) {
                    volumeControl.classList.remove('active');
                }
            });
            
            // éŸ³é‡è°ƒèŠ‚
            volumeSlider.addEventListener('input', (e) => {
                audioSystem.setVolume(parseFloat(e.target.value));
            });
            
            // æ›´æ–°å½“å‰æ—¶é—´å‡½æ•°
            function updateCurrentTime() {
                const now = new Date();
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, '0');
                const day = String(now.getDate()).padStart(2, '0');
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                const seconds = String(now.getSeconds()).padStart(2, '0');
                
                const formattedTime = `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
                document.getElementById('currentTime').textContent = formattedTime;
            }
        });
    </script>
</body>
</html>